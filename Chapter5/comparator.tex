Among the available topologies in the literature, the most popular have been investigated in section~\ref{sec:comp-delay-design}: the Strong ARM latch and the Double Tail comparator. With a digital clocking scheme different between the SAR of the last stage and the two first stages of the hybrid ADC, a fast version and a slow version of comparators are targeted. The slow version is well-suited for the SAR for which the offset is the most stringent constraint. While for the two first stages, to wit, the Incremental-\(\Delta \Sigma\) and the Algorithmic, require a comparator to make decisions very fast without as much constraint on the offset.

For the slow version of comparator the delay expected should be lower than 3 ns, while the offset does not exceed 10 mV. The hysteresis and differential kickback should be minimized. For the fast version, the delay should be a few hundreds of picoseconds. And the offset is not a big deal since the two first stage combined can be calibrated to cope with up to 50 mV of offset (amplifier offset plus the comparator offset taking into account the capacitive bench).

In consequence, comparators should be tested with respect to the following criteria from -40\(\degree\)C to +175\(\degree\)C\@:
\begin{itemize}
\item The power consumption
\item The offset
\item The time delay
\item The noise
\end{itemize}

For the test chip of comparators, the test chip DOE\_COMP, there are three test patterns: one to estimate the delay, one to measure only the offset, and at last to estimate the offset, the noise, and the hysteresis. Respectively we called them test pattern A, B, and C. In addition to this, two other measures are required: the power consumption of comparators and the temperature inside the chip. 

% Depicted in the \figurename~\ref{fig:test-chip-comp-patterns} a and e, the Delay measurement circuit is a frequency generator based on the output of the comparator. To measure the offset, the circuit in the \figurename~\ref{fig:test-chip-comp-patterns} b and f, is a regulation loop of one comparator input with a charge pump. The difference between inputs corresponds to the input referred offset of the comparator. And the conventional offset measurement circuit is counting the occurrence of the comparator output for a given differential input, \figurename~\ref{fig:test-chip-comp-patterns} c. The offset, the hysteresis, and the noise can be then extracted from the cumulative distribution function of the output with respect to the differential input voltage.

DOE\_COMP evaluates two different comparator topologies by the mean of dedicated test circuits. This test chip counts up to 20 comparators with 16 comparators under the test pattern C, 8 of each topology. Other test patterns can only test one comparator. Therefore, DOE\_COMP counts two delay test pattern (Pattern A-SA and Pattern A-DTL) and two Offset Feedback test pattern (Pattern B-SA and Pattern B-DTL) to assess each topology. Due to its novelty, one extra Pattern A circuit is added to the test chip for diagnostic purpose with an external comparator. In consequence, DOE\_COMP characterizes 10 Double-Tail latches and 10 Strong-Arm latches with 3 Pattern A, 2 Pattern B, 1 Pattern C and 4 frequency dividers to output high speed signals generated by Pattern A circuits, and to verify the clock connection. 

\begin{figure}[htp]
    \centering
    \begin{subfigure}[b]{0.5\textwidth}
        \includegraphics[width=\textwidth]{Chapter5/Figs/comp_test/test_delay_bloc_close_sa.ps}
        \subcaption{Pattern A-SA}
    \end{subfigure}
    \begin{subfigure}[b]{0.5\textwidth}
        \includegraphics[width=\textwidth]{Chapter5/Figs/comp_test/test_offset_bloc_close_sa.ps}
        \subcaption{Pattern B-SA}
    \end{subfigure}
    \begin{subfigure}[b]{0.75\textwidth}
        \includegraphics[width=\textwidth]{Chapter5/Figs/comp_test/test_offset_conv_bloc.ps}
        \subcaption{Pattern C}
    \end{subfigure}
    \caption{Representation of test patterns which will be described in the following sections}
    \label{fig:test-chip-comp-patterns}
\end{figure}

About the clock signal CLK, one pad will distribute the signal across the offset test circuits and their digital. The signal of the clock is single-ended and will be generated by using a sine wave at 100 MHz reshaped.

For signal generation the Tektronic AFG3102C is at our disposal. On the PCB, a clock driver and an impedance adaptation are assumed close to the comparator test chip. Inside the chip, the clock signal reshaped with a Schmitt trigger is distributed differentially across the test chip (CLK and CLKB). A CLOCK\_CONTROL signal is output in order to check to good-connexion of the clock signal to test blocks.

About the digital signals, they are generated by an NI-USB 8452 and drive directly pads of the test chip. Inside the IC, those signals are reshaped with a Schmitt trigger. Finally the test chip has 56 pads in total connected to the footprint of a CLCC68 package.

\subsection{Power Consumption}
To supply DOE\_COMP, one power supply is connected to the comparators while another is connected to the remaining circuits.
As both topologies of comparators are tested, we thus separate the power supplies of comparators of different topology to limit the interference in results. As presented in table~\ref{tbl:test-chip-comp-pattern}, there are 12 pads for supply connections: VDDA<6:1> and VDD<6:1>. Therefore, we are able to measure both the comparator power consumption and the test circuit consumption without interference of one over another. For the sake of simplicity, there is a ground pad for the all comparators, and one ground for the remaining circuits in DOE\_COMP. These two forms a star connection to have the same reference between comparators and test circuits.

\begin{table}[htp]
    \caption{Test pattern implemented to assess each comparator topology}
    \label{tbl:test-chip-comp-pattern}
    \resizebox{\textwidth}{!}{%
    \begin{tabular}{@{}lclcc@{}}
    \toprule
    \multicolumn{1}{c}{} &  & \multicolumn{1}{c}{} & \multicolumn{2}{c}{Power Supply} \\
    \multicolumn{1}{c}{\multirow{-2}{*}{Test Pattern}} & \multirow{-2}{*}{\begin{tabular}[c]{@{}c@{}}Comparator\\ Topology\end{tabular}} & \multicolumn{1}{c}{\multirow{-2}{*}{Function}} & comparator & test circuit \\ \midrule
    Pattern A & Strong Arm &  & VDDA\textless{}6\textgreater{} & VDD\textless{}6\textgreater{} \\
     & Double-Tail & \multirow{-2}{*}{\begin{tabular}[c]{@{}l@{}}Measure the delay and the time to reset\end{tabular}} & VDDA\textless{}5\textgreater{} & VDD\textless{}5\textgreater{} \\
    Pattern B & Strong Arm &  & VDDA\textless{}3\textgreater{} & VDD\textless{}3\textgreater{} \\
     & Double-Tail & \multirow{-2}{*}{\begin{tabular}[c]{@{}l@{}}Measure the offset by using a feedback loop\end{tabular}} & VDDA\textless{}4\textgreater{} & VDD\textless{}4\textgreater{} \\
    Pattern C & Strong Arm &  & VDDA\textless{}1\textgreater{} &  \\
     & Double-Tail & \multirow{-2}{*}{\begin{tabular}[c]{@{}l@{}}Measure the offset\\ by using the output CDF\footnotemark\\for a given input voltages\end{tabular}} & \multicolumn{1}{l}{  VDDA\textless{}2\textgreater{}} & \multirow{-2}{*}{VDD\textless{}1\textgreater{}} \\
     & & & & \\ \bottomrule
    \end{tabular}%
    }
\end{table}
\footnotetext{cumulative density function}

To measure the power consumption, the power supply connections to DOE\_COMP are cut. In normal operation jumpers connect them. For the consumption measurement, an amp-meter take the place of a jumper.

To limit the variation on power supply pads from the chip consumption, an external capacitor of at least 1 $\mu$F should be connected to each power supply pads. Concerning the power supply, it should be able to provide 20 mA at 1.8 V for digital pads and a peak internal power consumption of 35 mA. For tests, the power consumption of a comparator is in average 20 $\mu$W at 1.8 V. This implies to be able to measure an average current in the order of 11 $\mu$A. A Keithley-2000 series is appropriate with a possible accuracy in the sub micro-amps range. For measures, while only one comparator is connected in the Pattern A and B, the power supply of the Pattern C is connected to 8 comparators.

\subsection{Test Pattern C: Conventional Offset, Hysteresis, and Noise measurement}
From the design of comparators, the target offset is as close as possible from zero with a standard deviation of 3 mV. Based on that, the accuracy needed is less 500 $\mu$V\footnotemark for a maximum error of 5\% on the standard deviation. \footnotetext{see Appendix~\ref{app:acc-offset} for the details of the calculation}

\subsubsection{Principle}
As represented in \figurename~\ref{fig:conv_offset}, this solution consists in counting the number of ones and zeros generated by comparators under test, for each differential input voltage distributed evenly around the common mode voltage. Therefore, each differential input voltage is associated with a ratio of ones counted over the maximum possible values in the test time. This corresponds to averaging the comparator output for each differential input voltage. By sweeping the input voltages of the comparator, we get an S-shaped probability distribution.

\begin{figure}[htp]
    \centering
    \includegraphics[width=.8\textwidth]{Chapter5/Figs/comp_test/offset_conv_principle.ps}
    \caption{Typical principle to measure the offset of comparators based on the variation of the differential input voltage}
    \label{fig:conv_offset}
\end{figure}

Without offset, the inflexion point of the curve plotted should be equal to the common-mode voltage: $\Delta V_{in} = 0$. And a small shift corresponds to the offset. This solution is the most common for measurement of the offset~\cite{4395036,6482245,6644886}.

The advantage of such circuit is the resilience to cope with the thermal noise. At a given clock frequency, the smallest differential input voltage is set by the one who test. But for a tiny differential input, the noise will trigger the comparator under test, and its outputs are either 1 or 0. An assumed white thermal noise will produce an evenly repartition of 1 and 0, thence only few bits over thousands shift the probability to output one. This makes a smoother transition from quasi-zero to quasi-one probability. This results only in a change of the standard deviation.

From the density function to output a one, we fit the data with a normcdf() function. The fitting will average the error due the white Gaussian noise while it estimates the average and the standard deviation of the offset. The average, equal to the inflexion point of the curve, corresponds to the offset, and ideally occurs for a probability of 50\%. And the standard deviation of the offset corresponds to the noise contribution. There is no preferred algorithm for the fitting, so we used Levenberg-Marquardt to minimize the error committed on the fitting.

Moreover, applying this procedure over several comparators allows us to calculate the average of the offset and its standard deviation with respect to process and mismatch. This time, the probability curve should be the average of each comparator probability curve. The average offset is thus defined by the differential input voltage which corresponds to the 50\% of the new probability. And the standard deviation is extracted from the 68.27\% probability range around the new inflexion point.

\subsubsection{Curve Fitting Limitation}
For a comparator without hysteresis, the probability to output a one for each $\Delta V_{\rm in}$ is similar to what is represented in the \figurename~\ref{fig:conv_offset}. With an hysteresis, \figurename~\ref{fig:conv_offset_hyst}, the transition of probability will be slightly sharper. In order, the highlight the presence of hysteresis, the differential input voltage should be progressively changing from negative values to positive values then from positive values to negative values. The presence of hysteresis will demonstrate two S-shapes shifted from one to the other. The $\Delta$V shift of the offset value corresponds to the hysteresis while $\Delta V_{\rm in1}$ and $\Delta V_{\rm in2}$ represent the offset voltage. To correctly estimates, the data should be split to have one fitting when the differential input is increasing, and one when the differential input is decreasing.

\begin{figure}[htp]
    \centering
    \includegraphics[width=.3\textwidth]{Chapter5/Figs/comp_test/offset_conv_principle_hyst.ps}
    \caption{Measurement of the hysteresis by sweeping back and forth the input voltages of comparators}
    \label{fig:conv_offset_hyst}
\end{figure}

About the choice of the input voltage, the input referred offset is in the $\pm$ 10 mV range. Therefore, the $\Delta V$ in shall be from -20 mV to +20 mV to ensure some margin. And to respect the requirement on the accuracy, a step between two consecutive differential input voltages should be less than 500 $\mu$V.

From a fitting point of view, the less noise there is, the fewer the number of points is in the transition. In consequence, the step between two consecutive differential input voltages might not be sufficient to estimate the noise accurately. By simulation, the standard deviation of the noise is 480 $\mu$V rms such that a 3$\sigma$ transition is expected to have 9 points. 

\subsubsection{Bloc Description}
The analogue part of the conventional test circuit is represented in the \figurename~\ref{fig:test-chip-comp-patterns-conv}. This part is made of 16 comparators with their inverters and SR-latch next to them. Among those comparators, there are 8 Strong Arm and 8 Double Tail comparators taking their decision at the same time. Inverters decouple the comparator output from the SR-latch who memorized the output. The inverter's outputs are considered to be analog, while the output of the SR-latch is assumed to be digital.

\begin{figure}[htp]
    \centering
    \includegraphics[width=0.75\textwidth]{Chapter5/Figs/comp_test/test_offset_conv_bloc.ps}
    \caption{Conventional offset measurement circuit to measure the offset, the hysteresis and the noise of 16 comparators (8 Strong-ARM and 8 Double-Tail)}
    \label{fig:test-chip-comp-patterns-conv}
\end{figure}

\begin{figure}[htp]
    \centering
    \begin{subfigure}[b]{0.48\textwidth}
        \includegraphics[width=\textwidth]{Chapter5/Figs/comp_test/comparator_analog_offset_layout.png}
        \subcaption{Analogue Placement}
    \end{subfigure}
    \begin{subfigure}[b]{0.48\textwidth}
        \includegraphics[width=\textwidth]{Chapter5/Figs/comp_test/comparator_digital_offset_layout.png}
        \subcaption{Digital Bloc and signal selection}
    \end{subfigure}
    \caption{Comparator test chip overview with 20 comparators to test the delay, the offset of the both comparator topology. One extra delay test circuit is for diagnostic purpose}
    \label{fig:comp_offset_layout}
\end{figure}

The interleaved repartition into even index for strong arm and odd index for double tail, in \figurename~\ref{fig:comp_offset_layout} a, prevents the performance degradation of one comparator in favor of the other by having the same voltage drops for both topologies.

As represented in \figurename~\ref{fig:comp_offset_layout} b, the output of 16 comparators enter the digital bloc which selects which one is counted. To configure which comparator is selected, 4 bits are transferred through SIN with respect to its clock SCLK\@. Then 16 bits are transferred in order to select which comparators are taking decisions which control the ENCLOCK signals. The last bit is validated by a STRF pulse which reply by sending the output of the internal counter of 1s.

\begin{figure}[htp]
    \centering
    \includegraphics[width=0.8\textwidth]{Chapter5/Figs/comp_test/configuration-patternc.ps}
    \label{fig:test-comp-pattern-c-config}
    \caption{Configuration signal to validate the configuration and counter value reading}
\end{figure}

\subsubsection{Simulation Results}
In order to verify that the probability model chosen is correct, the input file of the post-processing script is obtained by simulation the test bench with a comparator of Reference. While one the input voltage is set to the common mode voltage, the other is a triangle waveform from $V_{cm}-20 mV$ to $V_{cm}+20 mV$ by step of 0.5 mV. The expected offset and the expected standard deviation of the offset are respectively 5 mV and 1 mV with an hysteresis of 1 mV. The simulation at 27$\degree$C, gives the results presented in the \figurename~\ref{fig:offset_conv_verif}.

\begin{figure}[htp]
    \centering
    \begin{subfigure}[b]{0.32\textwidth}
        \adjincludegraphics[trim={{0.01\width} 0 {0.657\width} 0},clip,width=\textwidth]{Chapter5/Figs/comp_test/offset_conv_comp_ref_res.png}
        \subcaption{Offset}
    \end{subfigure}
    \begin{subfigure}[b]{0.32\textwidth}
        \adjincludegraphics[trim={{0.345\width} 0 {0.33\width} 0},clip,width=\textwidth]{Chapter5/Figs/comp_test/offset_conv_comp_ref_res.png}
        \subcaption{Standard deviation}
    \end{subfigure}
    \begin{subfigure}[b]{0.32\textwidth}
        \adjincludegraphics[trim={{0.675\width} 0 0 0},clip,width=\textwidth]{Chapter5/Figs/comp_test/offset_conv_comp_ref_res.png}
        \subcaption{Hysteresis}
    \end{subfigure}
    \caption{Extracted offset and standard variation of the offset for the comparator of reference at all positions}
    \label{fig:offset_conv_verif}
\end{figure}

In simulation, the average offset is as represented in \figurename~\ref{fig:offset_conv_verif} a. The estimation for each comparator gives 5 mV as expected. And since there is only the noise which impact the slope of the rising probability of one, the standard variation should be equal too. In the \figurename~\ref{fig:offset_conv_verif} b, the estimation of the standard variation is around this value. Therefore, the methodology applied extracts correctly the information of the offset for the comparator of reference.

Then, the comparators are changed for a Double-Tail comparator as done in other tests. First, the impact of the temperature is studied for 5 temperatures linearly distributed in the -50$\degree$C -- +175$\degree$C range. Nothing is changed between the simulation of the reference comparator and this test.
The results for the temperature variation are presented in the \figurename~\ref{fig:offset_conv_dtl} which represents the offset variation, its standard deviation, and the hysteresis with respect to the temperature for the slowest version of the Double Tail. A Gaussian variation of parameters due to mismatch around this corner is performed.

\begin{figure}[htp]
    \centering
    \begin{subfigure}[b]{0.32\textwidth}
        \adjincludegraphics[trim={{0.01\width} 0 {0.657\width} 0},clip,width=\textwidth]{Chapter5/Figs/comp_test/offset_conv_comp_dtl_res.png}
        \subcaption{Offset}
    \end{subfigure}
    \begin{subfigure}[b]{0.32\textwidth}
        \adjincludegraphics[trim={{0.345\width} 0 {0.33\width} 0},clip,width=\textwidth]{Chapter5/Figs/comp_test/offset_conv_comp_dtl_res.png}
        \subcaption{Standard deviation}
    \end{subfigure}
    \begin{subfigure}[b]{0.32\textwidth}
        \adjincludegraphics[trim={{0.675\width} 0 0 0},clip,width=\textwidth]{Chapter5/Figs/comp_test/offset_conv_comp_dtl_res.png}
        \subcaption{Hysteresis}
    \end{subfigure}
    \caption{Extracted offset and standard variation of the offset for the slowest double tail}
    \label{fig:offset_conv_dtl}
\end{figure}

The proposed circuit is able to operate even for a comparator which is really slow and over temperature. The variation with respect to the temperature behaves as expected. The standard variation of the offset corresponds to the results found in section~\ref{sec:latches_sim} while the mean of the offset is centred on 0.

\subsection{Test Pattern B: Feedback Offset Measurement Circuit}
\subsubsection{Principle}
This solution consists in regulating one input voltage of the comparator such that the comparator always has difficulty to make the difference. The differential input voltage applied is the offset. This circuit is an hysteretic control loop based on~\cite{1594475}.

The advantage of such a direct control over the output voltage is the speed of the control loop. When the output voltage changes due to a transient, the time it takes for the control loop to begin to react is limited only by the propagation delays in the comparator and gate driver. There is no low-bandwidth error amplifier for an error signal to travel through. Thus, the hysteretic topology is the fastest control topology. This test allows to easily measure the offset for different common-mode voltage.

Nevertheless, the main disadvantages of this method are the slow convergence (few milliseconds) to the actual threshold value considering mismatch and PVT variations according to~\cite{7050041} with the intrinsic noise of the comparator which toggle outputs. Moreover, one circuit is able to test only one comparator at the same time.

\begin{figure}[htp]
    \centering
    \begin{subfigure}[b]{0.49\textwidth}
        \includegraphics[width=\textwidth]{Chapter5/Figs/comp_test/feedback_offset_comp_principle.ps}
        \subcaption{schematic}
    \end{subfigure}
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{Chapter5/Figs/comp_test/fb_comp_offset_ref_res.png}
        \subcaption{transient voltage}
    \end{subfigure}
    \caption{Test bench for the offset simulation which including pads and wire bonding with the noisy transient simulation for a comparator of reference}
    \label{fig:tb_fb_comp_offset}
\end{figure}

The \figurename~\ref{fig:tb_fb_comp_offset} a represents the schematic view of the test while the \figurename~\ref{fig:tb_fb_comp_offset} b depicts the signal seen over the simulation of a comparator with 5 mV offset and 1 mV rms noise. This test circuit has only one mode and is always on. By beginning with a reference voltage $V_{\rm inp}$ at 0 V, the offset voltage after few milliseconds will be at zero volt too. Then, the reference voltage steps up to the desired common-mode voltage. Therefore, the comparator will detect the difference between the two, and its memorised output will be 1. So, the charges pump circuit in the voltage generation bloc raise the OFB\_OFFSET voltage. With one transistor in saturation while the other is blocked, the current to load the capacitor is approximately the current defined by the $I_b$ over a full clock period of CLK. This pursues until the offset voltage is greater than the reference voltage. In this case, the current that charges the load capacitor is $–I_b$. Thence, the offset voltage start to oscillate around the real input referred offset of the comparator.

\subsubsection{Bloc Description}
As represented in \figurename~\ref{fig:tb_fb_comp_offset} a, this circuit takes as input two current of reference which control the slewing of the feedback voltage OFFSET\@. In addition to that, a voltage of reference called $V_{\rm inp}$ corresponds to the common-mode voltage at which we expect to test. The clock provided to the comparator control make the comparator start a decision at its rising edge, while the comparator is reset when the clock is low. An SR-latch memorizes the output of the comparator under test before the reset. From the decision, the charge pump charges/or discharges an internal capacitor of 1.8 pF. The voltage generated OFFSET is used as the second input voltage of the comparator, and is connected to an output pad itself connected to an external capacitor to limit oscillations. Concerning the power supply, only one VDD and GND pins are needed. The voltage of the power supply is 1.8 V.

\subsubsection{source of perturbations}
In this circuit the external source of perturbations is the current source. Let us suppose the comparator operate in the same condition it will in the ADC\@, to wit $V_{DD}$ = 1.8 V and $F_{CLK}$ = 100 MHz. The comparator makes a decision every 10 ns. Due to the latence in the feedback loop, the variation of the offset voltage $\Delta$V is thus defined by the slewing: $\Delta V = \frac{I_b}{C_L F_{CLK}}$.

In a first approximation, the error committed by the circuit with a $C_L = C_{Lint} = 1.8 pF$, $I_b = 500 nA$ is 1.38 mV around the real value. In order to match the requirement of the 500 $\mu$V around the offset, the minimal capacitance should be at least 5.3 pF. This can be easily achieved by connecting an I/O pad directly to the probe of the measurement device and adding an external capacitor out of the chip of 2.2 pF: $C_L = C_{Lint} + C_{probe} + C_{Lext}$. This limiting the oscillations, but not annihilating them, we are interested in only the average value of the differential input.

Concerning phenomena from the comparator, the hysteresis will impact the desired voltage measurement. Indeed, having a different threshold voltage due to previous state of the comparator, the measured offset voltage will be oscillating between the two thresholds of the hysteresis. 
If the slope of the generated offset is very slow such that the variation peak-peak between two clock rising edge is less than the hysteresis, this phenomena is detected. If not, the average value still provides the information of the offset which is close to the average of the hysteresis threshold value.

Another phenomenon occurs due to the comparator decision: the kickback. The single-ended kickback is important since it will drop the voltage across the load capacitor, even if, the amplifier is always charging the capacitor. Therefore, the size of the capacitor is an important decision.
With a single-ended kickback of 500 mV over a 100 fF capacitor, by applying a rule of three, the kickback seen on a 1.8 pF plus an I/O pad will be 16 mV. The amplifier limiting the drop, this results in a 14.7 mV voltage drop on the offset voltage.


\subsubsection{Post-Layout Results}
Since neither the kickback nor the hysteresis is modelled in the comparator of reference, the information of whether the offset feedback circuit is able to cope with these phenomena is not known. Therefore, a post-layout comparator replaced the one of reference. Moreover, the schematic of the comparator and the extracted version of comparators have an adjusted offset around 5 mV to compare with the previous simulation results in \figurename~\ref{fig:tb_fb_comp_offset}. This allows us to compare the only the impact of the phenomena not taken into account by the reference comparator.

\begin{figure}[htp]
    \centering
    \begin{subfigure}[b]{0.48\textwidth}
        \includegraphics[width=\textwidth]{Chapter5/Figs/comp_test/comparator_offset_feedback_trans_real.png}
        \subcaption{Real comparator transient}
    \end{subfigure}
    \begin{subfigure}[b]{0.48\textwidth}
        \includegraphics[width=\textwidth]{Chapter5/Figs/comp_test/comparator_offset_feedback_trans_real-zoom.png}
        \subcaption{Zoom on the kickback and hysteresis effect}
    \end{subfigure}
    \caption{Hysteresis and kickback effect on the offset feedback circuit at 27$\degree$C}
    \label{fig:comp_hyst}
\end{figure}

The transient offset voltage with the clock and the decision of the comparator along side are depicted by the \figurename~\ref{fig:comp_hyst}. The results are for ambient temperature at 27$\degree$C. Since the current switching is low the voltage variation is fully delimited by the hysteresis of the comparator under test, to wit 325$\mu$V. With a large capacitive load split inside the chip and outside, the kickback is limited to few microvolts even for a clock at 100 MHz.

Running a Monte-Carlo analysis of comparators designed after parasitic extraction, the offset statistic of a slow double-tail comparator is compared to the traditional method of clocked comparator extraction used in Section~\ref{sec:latches_sim}. The Table~\ref{tbl:offset_fb_dtl_post_layout} presents the result under a 6$\sigma$ process and mismatch parameter variation at three different temperatures with 50 samples each.

\begin{table}[htp]
    \centering
    \caption{(Gaussian 6-$\sigma$) Monte-Carlo analysis results of the extracted offset for the double tail comparator with the current offset simulation}
    \label{tbl:offset_fb_dtl_post_layout}
    \begin{tabular}{cccccccc}
    \hline
    \multirow{2}{*}{Temperature/Offset} & \multirow{2}{*}{Min {[}mV{]}} & \multirow{2}{*}{Max {[}mV{]}} & \multicolumn{2}{c}{Mean {[}$\mu$V{]}} & \multicolumn{2}{c}{$\sigma_{offset}$ {[}mV{]}} & \multirow{2}{*}{$\Delta V$ {[}mV{]}} \\
                                        &                               &                               & Circuit           & Ref            & Circuit                 & Ref                  &                                   \\ \hline
    -50$\degree$C                          & -1.89                         & 2.72                          & 269               & 290            & 1.27                    & 1.73                 & 1.16                              \\
    27$\degree$C                           & -2.14                         & 3.47                          & 570               & 620            & 1.39                    & 1.84                 & 2.33                              \\
    175$\degree$C                          & 3.33                          & 6.6                           & 1000              & 1410           & 2.29                    & 2.44                 & 4.64                              \\ \hline
    \end{tabular}
\end{table}

The circuit is relevant for low-temperature measurement with an accuracy of 50 \(\mu\)V. Owing to thermal noise and hysteresis at high temperature the accuracy of the circuit decrease to 400 \(\mu\)V on the mean. A possibility to enhance results is by the averaging of the offset voltage lasting longer in time than 1\(\mu\)s (1000 comparator decision) to mitigate the transient noise in measurement with twice more samples. Unfortunately wire bonding issues prevent us to measure the offset by using this circuit.

\subsection{Test Pattern A: Delay Measurement Circuit}
\input{Chapter5/delay_test}